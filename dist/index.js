!function(t,e){for(var r in e)t[r]=e[r]}(exports,function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,r){void 0===e&&(e="未知错误");var n=t.call(this,e)||this;return n.code=r,n.name="KatoError",n}return o(e,t),e}(Error);e.KatoError=i;var a=function(t){function e(e){var r=this;return"string"!=typeof e&&console.error("KatoCommonError用于通用错误的表示,请保证message参数的可阅读性"),(r=t.call(this,e,0)||this).name="KatoCommonError",r}return o(e,t),e}(i);e.KatoCommonError=a;var u=function(t){function e(e,r){return r<=0&&console.error("KatoLogicError仅仅使用于特殊的错误处理逻辑,根据规范,请保证错误编码>0"),t.call(this,e,r)||this}return o(e,t),e}(i);e.KatoLogicError=u;var s=function(t){function e(e){void 0===e&&(e="未知运行时错误");var r=t.call(this,e,-1)||this;return r.name="KatoRuntimeError",r}return o(e,t),e}(i);e.KatoRuntimeError=s;var c=function(t){function e(e){void 0===e&&(e="不具备调用权限");var r=t.call(this,e,-2)||this;return r.name="KatoAuthError",r}return o(e,t),e}(i);e.KatoAuthError=c;var l=function(t){function e(e){void 0===e&&(e="非法的API参数调用");var r=t.call(this,e,-3)||this;return r.name="KatoValidateError",r}return o(e,t),e}(i);e.KatoValidateError=l},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,u)}s((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),a=r(3),u=r(4),s=r(8),c=r(0),l={},f=function(){function t(){this.interceptors=new a.InterceptorContainer,this.use=this.interceptors.use.bind(this.interceptors),this.inited=!1;var t="",e={};1===arguments.length?"string"==typeof arguments[0]?t=arguments[0]:e=arguments[0]:arguments.length>1&&(t=arguments[0],e=arguments[1]),""===t||t.endsWith("/")||(t+="/"),this.baseUrl=t,this.options=u.getOptions(e),this.dispatcher=this.options.dispatcher}return t.prototype.init=function(){return n(this,void 0,void 0,function(){var t,e,r,n,i,a,u,s;return o(this,function(o){switch(o.label){case 0:return this.inited?[3,2]:(t=this,[4,this.fetchStub()]);case 1:for(t.stub=o.sent(),e=0,r=this.stub.modules;e<r.length;e++){for(n=r[e],i={},a=0,u=n.methods;a<u.length;a++)s=u[a],i[s.name]=this.generateInvoker(n.name,s.name,s.parameters);this[n.name]=i}this.inited=!0,o.label=2;case 2:return[2]}})})},t.prototype.generateInvoker=function(t,e,r){var a=this;return function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return n(this,void 0,void 0,function(){var n,l,f,h,p,d,y,v;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),l={},u.forEach(function(t,e){r[e]&&(l[r[e].name]=s.jsonStringify(t))}),f={client:a,req:{url:""+a.baseUrl+t+"/"+e+".ac",data:i.stringify(l),headers:{"content-type":"application/x-www-form-urlencoded"}},res:null},[4,a.interceptors.do(f)];case 1:if(o.sent(),200!==f.res.statusCode)throw new c.KatoRuntimeError("错误的HTTP状态码: "+f.res.statusCode);return""===f.res.data?[2,void 0]:(n=s.jsonParse(f.res.data),[3,3]);case 2:throw h=o.sent(),v=h,h instanceof c.KatoError||((v=new c.KatoRuntimeError(h.message)).stack=h.stack||""),v;case 3:if(n&&n.hasOwnProperty("_KatoErrorCode_")&&n.hasOwnProperty("_KatoErrorMessage_")&&n.hasOwnProperty("_KatoErrorStack_")){switch(p=n._KatoErrorCode_,d=n._KatoErrorMessage_,y=n._KatoErrorStack_,v=void 0,p){case-3:v=new c.KatoValidateError(d);break;case-2:v=new c.KatoAuthError(d);break;case-1:v=new c.KatoRuntimeError(d);break;case 0:v=new c.KatoCommonError(d);break;default:v=new c.KatoLogicError(d,p)}throw v.remoteStack=y,v}return[2,n]}})})}},t.prototype.fetchStub=function(){return n(this,void 0,void 0,function(){var t,e;return o(this,function(r){switch(r.label){case 0:return t=this.baseUrl+"stub.json",l[t]&&this.options.cacheStub?[3,2]:[4,this.dispatcher({url:t})];case 1:e=r.sent(),l[t]=JSON.parse(e.data),r.label=2;case 2:return[2,l[t]]}})})},t}();e.KatoClient=f,function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(0))},function(t,e){t.exports=require("query-string")},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,u)}s((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.interceptors=[]}return t.prototype.use=function(t){this.interceptors.push(t)},t.prototype.do=function(t){return n(this,void 0,void 0,function(){var e,r,i=this;return o(this,function(a){switch(a.label){case 0:return e=0,[4,(r=function(){return n(i,void 0,void 0,function(){var n,i;return o(this,function(o){switch(o.label){case 0:return"function"!=typeof(n=this.interceptors[e++])?[3,2]:[4,n.call(null,t,r)];case 1:return o.sent(),[3,4];case 2:return i=t,[4,t.client.dispatcher(t.req)];case 3:i.res=o.sent(),o.label=4;case 4:return[2]}})})})()];case 1:return a.sent(),[2]}})})},t}();e.InterceptorContainer=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5),o={dispatcher:r(6).defaultDispatcher,cacheStub:!0};e.getOptions=function(t){return n(o,t)}},function(t,e){t.exports=require("merge-options")},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{s(n.next(t))}catch(t){i(t)}}function u(t){try{s(n.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new r(function(e){e(t.value)}).then(a,u)}s((n=n.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(7);e.defaultDispatcher=function(t){return n(this,void 0,void 0,function(){var e;return o(this,function(r){switch(r.label){case 0:return[4,i.default({method:"post",url:t.url,data:t.data,headers:t.headers,transformResponse:function(t){return t}})];case 1:return[2,{data:(e=r.sent()).data,statusCode:e.status,type:e.headers["content-type"],headers:e.headers}]}})})}},function(t,e){t.exports=require("axios")},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(9),o=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]?\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]?\d:[0-5]\d|Z))$/;function i(t,e){return"string"==typeof e&&o.exec(e)?n(e).toDate():e}function a(t,e){return"string"==typeof e&&o.exec(e)?n(e).format("YYYY-MM-DDTHH:mm:ss.SSSZ"):e}e.reviver=i,e.replacer=a,e.jsonParse=function(t){return JSON.parse(t,i)},e.jsonStringify=function(t){return JSON.stringify(t,a)}},function(t,e){t.exports=require("dayjs")}]));
//# sourceMappingURL=index.js.map